

<p>We all know the frustration of searching endlessly for a document you know exists somewhere in your personal files. Traditional search often relies on exact file names or rigid folder structures, making it difficult to quickly find what you need. But what if you could simply chat with your documents and instantly locate the right file: summarized, indexed, and ready to use?</p>

<p>In this article, I&rsquo;ll share a real-life example of how I built a solution that does exactly that. By combining <strong>LangGraph</strong> with <strong>Oracle Generative AI</strong> and <strong>Oracle Database 23ai</strong>, I created an intelligent system that automatically extracts metadata, generates concise summaries, and indexes file contents for easy retrieval. The result is a conversational agent that transforms how we interact with our personal data: instead of searching through folders, you ask questions in natural language and the system finds the right document for you.</p>

<blockquote style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;">
<p><strong>Note</strong>: This agent is intended for file search only. It does not have the ability to answer in-depth questions regarding the content of your files, as it can only access the summary of each document.</p>
</blockquote>

<h1 id="file-indexing-discovery-what-your-files-are-about">File Indexing: Discover&nbsp;what your files are about</h1>

<p>This blog demonstrates how to index PDF, Images, DOCx or TXT files using Python code, Generative AI models and Oracle 23ai database</p>

<figure><img alt="t01_fileProcessingFlow" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONT5C6D956D89514BAFB28568797A851F8F/native" title="t01_fileProcessingFlow" /></figure>

<blockquote style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;">
<p><strong>IMPORTANT</strong>: This blog is designed solely for educational and study purposes. It provides an environment for learners to experiment and gain practical experience in a controlled setting. It is crucial to note that the security configurations and practices employed in this lab might not be suitable for real-world scenarios.</p>

<p>Security considerations for real-world applications are often far more complex and dynamic. Therefore, before implementing any of the techniques or configurations demonstrated here in a production environment, it is essential to conduct a comprehensive security assessment and review. This review should encompass all aspects of security, including access control, encryption, monitoring, and compliance, to ensure that the system aligns with the organization&rsquo;s security policies and standards.</p>

<p>Security should always be a top priority when transitioning from a lab environment to a real-world deployment.</p>
</blockquote>

<h2 id="technologies-powering-this-solution">Technologies powering this solution</h2>

<ul>
	<li><a href="https://docs.oracle.com/en-us/iaas/autonomous-database-serverless/doc/autonomous-intro-adb.html#GUID-8EAA5AE6-397D-4E9A-9BD0-3E37A0345E24">Oracle Autonomous Database 23ai</a> : Oracle 23ai is a converged database that seamlessly combines advanced vector search with proven relational capabilities, enabling AI-driven and traditional workloads in a single platform.</li>
	<li><a href="https://github.com/langchain-ai/langgraph">LangGraph</a> : LangGraph is a low-level, stateful orchestration framework for building and managing long-running AI agents and complex multi-agent workflows using graph-based architecture</li>
	<li><a href="https://docs.oracle.com/en-us/iaas/Content/generative-ai/getting-started.htm">OCI Generative AI Services</a>: OCI Generative AI is a managed service offering customizable LLMs for chat, text generation and summarization.</li>
	<li><a href="https://pypi.org/project/sentence-transformers/">Sentence Transformers</a>: The sentence-transformers package is a Python framework designed for creating and working with embeddings&mdash;dense vector representations of text that capture semantic meaning. Built on top of PyTorch and Hugging Face Transformers, it simplifies the process of encoding sentences, paragraphs, or documents into fixed-size vectors suitable for a wide range of Natural Language Processing (NLP) tasks.</li>
</ul>

<h2 id="prerequisites---oracle-cloud-infrastructure">Prerequisites - Oracle Cloud Infrastructure</h2>

<ul>
	<li>
	<p>Oracle account with admin level access permissions, if not admin level then apply the needed policies <a href="https://docs.oracle.com/en-us/iaas/Content/generative-ai/iam-policies.htm">Getting Access to Generative AI</a></p>
	</li>
	<li>
	<p>Oracle CLI installed on your local machine, see details here: <a href="https://docs.oracle.com/en-us/iaas/Content/API/SDKDocs/cliinstall.htm">Installing the CLI</a></p>
	</li>
	<li>
	<p>Oracle Autonomous Database 23ai, see details here: <a href="https://docs.oracle.com/en/cloud/paas/autonomous-database/serverless/adbsb/autonomous-provision.html">Provision an Autonomous Database Instance</a></p>
	</li>
	<li>
	<p>Python 3.12.10 installed, you can find more details here <a href="https://github.com/pyenv/pyenv">Simple Python Version Management: pyenv</a></p>
	</li>
	<li>
	<p>OpenGL libs installed on your machine, if you&rsquo;re using Oracle Linux, you can install by running the command:</p>

	<pre>
<code> # Install OpenGL 
 sudo dnf install -y mesa-libGL</code></pre>

	<blockquote style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;">
	<p><strong>Note</strong>: If you&rsquo;re using MacOS you don&rsquo;t need to install OpenGL.</p>
	</blockquote>
	</li>
</ul>
<p><h1>Quick Start</h1></p>
<h2>Collect all database needed information:</h2>
	<ul>
		<li>
		<p><strong>Go to your autonomous Oracle 23ai database, click on Database Connection and then click on Download Wallet</strong></p>

		<blockquote style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;"><strong>Note:</strong> Take note of your database wallet password!</blockquote>
		</li>
		<li>
		<p><strong>Click on Storage, under Object Storage &amp; Archive Storage click on Buckets, then create a new bucket to store your database wallet, then upload the downloaded wallet zip file.</strong></p>

		<blockquote style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;"><strong>Note: </strong> Take note of your namespace, bucket name and wallet zip file name.</blockquote>
		</li>
		<li>
		<p><strong>Collect all that information and make a note of it &mdash; we&rsquo;ll need it later.</strong></p>

		<table style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;">
			<colgroup>
				<col style="width: 20%" />
				<col style="width: 16%" />
				<col style="width: 63%" />
			</colgroup>
			<thead>
				<tr>
					<th>Variable</th>
					<th>Value</th>
					<th>Description</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>DB_USER</td>
					<td>&ldquo;admin&rdquo;</td>
					<td>The administrative database username</td>
				</tr>
				<tr>
					<td>DB_PASSWORD</td>
					<td>&ldquo;xxxxxx&rdquo;</td>
					<td>Your database password</td>
				</tr>
				<tr>
					<td>DB_DSN</td>
					<td>&ldquo;xxxxxxx&rdquo;</td>
					<td>Get the database service name from your tnsnames.ora, ie. yourdatabase_low</td>
				</tr>
				<tr>
					<td>WALLET_PASSWORD</td>
					<td>&ldquo;xxxxxxxx&rdquo;</td>
					<td>Get your wallet password</td>
				</tr>
				<tr>
					<td>OCI_BUCKET_NAMESPACE</td>
					<td>&ldquo;your bucket namespace&rdquo;</td>
					<td>The namespace of your created bucket</td>
				</tr>
				<tr>
					<td>OCI_BUCKET_NAME_WALLET</td>
					<td>&ldquo;your bucket name&rdquo;</td>
					<td>Your bucket name</td>
				</tr>
				<tr>
					<td>OCI_WALLET_OBJECT_NAME</td>
					<td>&ldquo;your wallet zip file name&rdquo;</td>
					<td>The name of your database wallet zip file</td>
				</tr>
				<tr>
					<td>OCI_COMPARTMENT_ID</td>
					<td>&ldquo;your compartment OCID&rdquo;</td>
					<td>Get your compartment OCID</td>
				</tr>
			</tbody>
		</table>
		</br> 
		<blockquote style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;">
		<p><strong>Note</strong> The tnsnames.ora file can be found inside the Wallet zip file.</p>
		</blockquote>
		</li>
	</ul>


	<h2>Let&rsquo;s start indexing the files</h2>

	<ul>
		<li>
		<p><strong>On your shell machine, get the code and create your .env file</strong></p>

		<pre>
<code>
git clone https://github.com/oracle-devrel/devrel-labs.git  
cd devrel-labs/langgraph_agent_with_genai/src. 
## Create your .env file from the template. 
cp .env_template .env. 
</code> 
</pre>
		</li>
		<li>
		<p><strong>Setting your values for the environment variables on .env</strong></p>

		<blockquote style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;"><strong>Note</strong> Edit the .env file using your preferred text editor and fill the information with your collected values from <strong>step 1</strong></blockquote>

		<pre>
<code>cat .env 

OCI_CLI_PROFILE=DEFAULT 
DB_USER=&quot;admin&quot;
DB_PASSWORD=&quot;xxxxxxx&quot;
DB_DSN=&quot;myrdbms_tp&quot;
WALLET_PASSWORD=&quot;xxxxxxx&quot;
OCI_BUCKET_NAMESPACE=&quot;xxxxxxxx&quot;
OCI_BUCKET_NAME_WALLET=&quot;my-bucket&quot;
OCI_WALLET_OBJECT_NAME=&quot;Wallet_MyRDBMS.zip&quot;

OCI_COMPARTMENT_ID=&quot;ocid1.compartment.oc1..xxxxx&quot;

#meta.llama-3.2-90b-vision-instruct
OCI_GENAI_IMAGE_MODEL_OCID=&quot;ocid1.generativeaimodel.oc1.sa-saopaulo-1.amaaaaaask7dceyalwceqwzlywqqxfzz3grpzjr42fej5qlybhu2d666oz4q&quot;
OCI_IMAGE_MODEL_ENDPOINT=&quot;https://inference.generativeai.sa-saopaulo-1.oci.oraclecloud.com&quot;

#meta.llama-3.3-70b-instruct
OCI_GENAI_ENDPOINT=&quot;https://inference.generativeai.sa-saopaulo-1.oci.oraclecloud.com&quot;
OCI_GENAI_REASONING_MODEL_OCID=&quot;ocid1.generativeaimodel.oc1.sa-saopaulo-1.amaaaaaask7dceyarsn4m6k3aqvvgatida3omyprlcs3alrwcuusblru4jaa&quot;
</code></pre>

		<blockquote style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;">
		<p><strong>IMPORTANT</strong>: This sample code was validated using models available in the <strong>sa-saopaulo-1</strong> region. Model availability may vary across regions; please refer to the documentation for the latest details.<br />
		You can find more information here <a href="https://docs.oracle.com/en-us/iaas/Content/generative-ai/pretrained-models.htm#pretrained-models">Pretrained Foundational Models in Generative AI</a>.<br />
		<strong>If you use different models, you will need to adjust the distance threshold on the search agent.</strong></p>
		</blockquote>

		<p>We use different models for each requirement:</p>

		<ul>
			<li>OCI_GENAI_IMAGE_MODEL_OCID: This is used to extract text from images (OCR), you must choose a <strong>Multimodal</strong> model.</li>
			<li>OCI_GENAI_REASONING_MODEL_OCID: This is used as LLM generation and understanding of the extracted text.</li>
		</ul>
		</li>
		<li>
		<p><strong>Initialize the database table on Oracle 23ai</strong><br />
		Run the <strong>init_database.py</strong> script that will create the table.</p>

		<pre>
<code>ls -lrt 
# Make sure you install all needed python dependencies.  
pip install -r requirements.txt 
python --version 
python init_database.py</code></pre>

		<figure><img alt="T02_03_InitDatabase" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONT4009D4EA1F0D4E398FCD11D157F47256/native" title="T02_03_InitDatabase" /></figure>
		</li>
		<li>
		<p><strong>Run the IA file indexing.</strong></p>

		<blockquote style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;">
		<p><strong>Note</strong>: For demonstration purposes, sample files have been created to support tool validation. These files simulate real documents, including lab test requisitions and results, a Brazilian driver&rsquo;s license, and Brazilian invoices and receipts.<br />
		The files are located on ./samples directory.</p>
		</blockquote>

		<pre>
<code>python batch_process_samples.py
</code></pre>

		<p><img alt="T02_04_IndexResultPart1" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONT6FC78CC33784448E9B97A1AE14A4062C/native" title="T02_04_IndexResultPart1" /> <img alt="T02_04_IndexResultPart2" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONTAF1AE7DB8D4243A684F5B3ED71D0513D/native" title="T02_04_IndexResultPart2" /></p>

		<p>The sample files from <strong>samples</strong> directory are now successfully indexed and stored your Oracle 23ai database.</p>
		</li>
	</ul>
		
<h2>Let&rsquo;s validate our indexed data (this is not our Search Agent).</h2>
<p>To validate the data, run the <strong>validation.py</strong> script. This script verifies the loaded data and checks the distances returned by the model when querying specific columns. The results can be used to confirm and refine the distance thresholds applied in the Search Agent.</p>
<pre>
<code>python validation.py</code>
</pre>

		<figure><img alt="T02_05_Validation_1" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONT82893FD5CDF1447186BFE42B1C347B70/native" title="T02_05_Validation_1" /></figure>

		<pre>
<code>python validation.py PERSON_NAME_EMBEDDING &quot;heloisa pires&quot; </code></pre>

		<figure><img alt="T02_05_Validation_2" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONT70E10E02145E4B6889A3A192EBD87AA3/native" title="T02_05_Validation_2" /></figure>

		<blockquote style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;">
		<p><strong>Note</strong>: As we can see, a simple query for person name using vector search return a very close distance, which means our model is running as expected.</p>
		</blockquote>





<p><br />
&nbsp;</p>

<h1 id="ai-agent-search-chat-with-your-files">AI Agent Search: Chat with your files</h1>

<p>The agent is designed to perform file retrieval based on both document summaries and associated metadata. Users can submit natural language queries about their files, and the agent will intelligently process the request to identify and return the most relevant documents.</p>

<figure><img alt="LangGraphPipelineSimplified" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONT01FC2DE6CE214083AF4577BA9592344F/native" title="LangGraphPipelineSimplified" /></figure>

<p><img alt="ToolPipeline_Simplified" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONT0F743252BF4048768F0E75FB1186DFAC/native" title="ToolPipeline_Simplified" /><br />
<img alt="ToolPipeline_2_Simplified" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONTC660EB06A96846BF871D03E9CFE7B0F0/native" title="ToolPipeline_2_Simplified" /></p>

<p>&nbsp;</p>

<h3 data-line="211" dir="auto">Key Code Snippet: Leveraging OCI Generative AI in the Agent</h3>

<p>⚠️ <strong>Warning</strong><br />
When working with LangChain on OCI, make sure you use the official Python package <strong>langchain_oci</strong>. Many users get confused because there is also a community ChatOCIGenAI class, which is depreacated and should not be used, for more information, check <a href="https://docs.public.content.oci.oraclecloud.com/en-us/iaas/Content/generative-ai/langchain.htm">langchain_oci.</a></p>

<p>The following snippet demonstrates the code currently used in this blog.</p>

<pre>
<code> # This is the correct package used in this agent
 cat requirements.txt |grep langchain-oci==0.1.3</code></pre>

<pre>
<code>.
.
.
from langchain_oci.chat_models import ChatOCIGenAI

llm = ChatOCIGenAI(
  model_id=model_id,
  service_endpoint=endpoint,
  compartment_id=compartment_id,
  auth_type=&quot;API_KEY&quot;,
  model_kwargs={&quot;temperature&quot;: 0.2, &quot;max_tokens&quot;: 1000}
)
</code></pre>

<h2>Run the agent, by running <strong>AgentChat.py</strong> script and start asking questions&hellip;</h2>

<pre>
<code>python AgentChat.py </code></pre>

<figure><img alt="AgentStart" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONT8DA7D7C4D3CC41C38723898A8FC9DA43/native" title="AgentStart" /></figure>

<h2>Let&rsquo;s try with a initial question: </h2>
<p><strong>&ldquo;I need a document that is about receipt of physiotherapy&rdquo;</strong></p>

<p><img alt="AgentQuestion1_01" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONT1A6636697D39428F9B4EC83692B9821D/native" title="AgentQuestion1_01" /><br />
<img alt="AgentQuestion1_02" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONT87F674415918444E843D8ECAB1DE0D11/native" title="AgentQuestion1_02" /></p>

<h2>Playing with questions:</h3>

<ul>
	<li>
	<p><strong>&ldquo;Which documents talk about brazilian branches?&rdquo;</strong><br />
	<img alt="Question2_result" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONTBA4202C00B314917801775E88609BC76/native" title="Question2_result" /></p>

	<blockquote style="font-size:0.9em;background:#f5f7f9;border-left:3px solid #ccc;padding:0.5em 0.8em;"><strong>Note</strong>: We mistakenly used the word &ldquo;branches&rdquo; instead of &ldquo;beaches&rdquo;, but the model still adapted.</blockquote>

	<p>&nbsp;</p>
	</li>
	<li>
	<p><strong>&ldquo;List test results from August 2025&rdquo;</strong><br />
	<img alt="Question3_result" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONTCFC7F31C4A834D81AC23E275C3FE665A/native" title="Question3_result" /></p>
	</li>
	<li>
	<p><strong>&ldquo;List receipts that are from physiotherapy&rdquo;</strong><br />
	<img alt="Question4_result" src="https://orasites-prodapp.cec.ocp.oraclecloud.com/content/management/api/v1.1/assets/CONT6EB8C8F99E754B0E9DD6A637A585EE52/native" title="Question4_result" /></p>
	</li>
</ul>

<p>&nbsp;</p>

<h2 id="conclusion">Conclusion</h2>

<p>This project demonstrates how combining LangGraph, Oracle Generative AI, and Oracle Database 23ai can transform the way we interact with our files&mdash;making search faster, smarter, and more intuitive. While the implementation here focuses on document indexing and retrieval, the same principles can be extended to many other real-world scenarios. By experimenting with additional tools, refining thresholds, and expanding metadata extraction, you can evolve this agent into a powerful foundation for building AI-driven knowledge management systems. The journey does not end here&mdash;this is just the starting point for reimagining how we connect with our data.</p>
